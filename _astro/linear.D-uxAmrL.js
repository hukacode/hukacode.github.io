import{c as j,d as p,e as w,f as q,g as k}from"./isObject.DakTDBFS.js";import{i as D}from"./init.Gi6I4Gst.js";import{e as g,f as F,a as z,b as B}from"./defaultLocale.C4B-KCzX.js";function I(n,t){t||(t=[]);var r,e=n?Math.min(t.length,n.length):0,a=t.slice();return function(u){for(r=0;r<e;++r)a[r]=n[r]*(1-u)+t[r]*u;return a}}function P(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function V(n,t){var r,e=t?t.length:0,a=n?Math.min(e,n.length):0,u=new Array(a),o=new Array(e);for(r=0;r<a;++r)u[r]=N(n[r],t[r]);for(;r<e;++r)o[r]=t[r];return function(n){for(r=0;r<a;++r)o[r]=u[r](n);return o}}function $(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function x(n,t){var r,e={},a={};for(r in(null===n||"object"!=typeof n)&&(n={}),(null===t||"object"!=typeof t)&&(t={}),t)r in n?e[r]=N(n[r],t[r]):a[r]=t[r];return function(n){for(r in e)a[r]=e[r](n);return a}}function N(n,t){var r,e=typeof t;return null==t||"boolean"===e?j(t):("number"===e?p:"string"===e?(r=k(t))?(t=r,w):q:t instanceof k?w:t instanceof Date?$:P(t)?I:Array.isArray(t)?V:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?x:p)(n,t)}function O(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function M(n,t){return null==n||null==t?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function T(n,t){return null==n||null==t?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function R(n){let t,r,e;function a(n,e,a=0,u=n.length){if(a<u){if(0!==t(e,e))return u;do{const t=a+u>>>1;r(n[t],e)<0?a=t+1:u=t}while(a<u)}return a}return 2!==n.length?(t=M,r=(t,r)=>M(n(t),r),e=(t,r)=>n(t)-r):(t=n===M||n===T?n:C,r=n,e=n),{left:a,center:function(n,t,r=0,u=n.length){const o=a(n,t,r,u-1);return o>r&&e(n[o-1],t)>-e(n[o],t)?o-1:o},right:function(n,e,a=0,u=n.length){if(a<u){if(0!==t(e,e))return u;do{const t=a+u>>>1;r(n[t],e)<=0?a=t+1:u=t}while(a<u)}return a}}}function C(){return 0}function E(n){return null===n?NaN:+n}const G=R(M),H=G.right;R(E).center;const J=Math.sqrt(50),K=Math.sqrt(10),L=Math.sqrt(2);function v(n,t,r){const e=(t-n)/Math.max(0,r),a=Math.floor(Math.log10(e)),u=e/Math.pow(10,a),o=u>=J?10:u>=K?5:u>=L?2:1;let i,f,c;return a<0?(c=Math.pow(10,-a)/o,i=Math.round(n*c),f=Math.round(t*c),i/c<n&&++i,f/c>t&&--f,c=-c):(c=Math.pow(10,a)*o,i=Math.round(n/c),f=Math.round(t/c),i*c<n&&++i,f*c>t&&--f),f<i&&.5<=r&&r<2?v(n,t,2*r):[i,f,c]}function Q(n,t,r){if(!((r=+r)>0))return[];if((n=+n)===(t=+t))return[n];const e=t<n,[a,u,o]=e?v(t,n,r):v(n,t,r);if(!(u>=a))return[];const i=u-a+1,f=new Array(i);if(e)if(o<0)for(let n=0;n<i;++n)f[n]=(u-n)/-o;else for(let n=0;n<i;++n)f[n]=(u-n)*o;else if(o<0)for(let n=0;n<i;++n)f[n]=(a+n)/-o;else for(let n=0;n<i;++n)f[n]=(a+n)*o;return f}function y(n,t,r){return v(n=+n,t=+t,r=+r)[2]}function U(n,t,r){r=+r;const e=(t=+t)<(n=+n),a=e?y(t,n,r):y(n,t,r);return(e?-1:1)*(a<0?1/-a:a)}function W(n){return function(){return n}}function X(n){return+n}var A=[0,1];function m(n){return n}function d(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:W(isNaN(t)?NaN:.5)}function Y(n,t){var r;return n>t&&(r=n,n=t,t=r),function(r){return Math.max(n,Math.min(t,r))}}function Z(n,t,r){var e=n[0],a=n[1],u=t[0],o=t[1];return a<e?(e=d(a,e),u=r(o,u)):(e=d(e,a),u=r(u,o)),function(n){return u(e(n))}}function _(n,t,r){var e=Math.min(n.length,t.length)-1,a=new Array(e),u=new Array(e),o=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<e;)a[o]=d(n[o],n[o+1]),u[o]=r(t[o],t[o+1]);return function(t){var r=H(n,t,1,e)-1;return u[r](a[r](t))}}function b(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function nn(){var n,t,r,e,a,u,o=A,i=A,f=N,c=m;function l(){var n=Math.min(o.length,i.length);return c!==m&&(c=Y(o[0],o[n-1])),e=n>2?_:Z,a=u=null,s}function s(t){return null==t||isNaN(t=+t)?r:(a||(a=e(o.map(n),i,f)))(n(c(t)))}return s.invert=function(r){return c(t((u||(u=e(i,o.map(n),p)))(r)))},s.domain=function(n){return arguments.length?(o=Array.from(n,X),l()):o.slice()},s.range=function(n){return arguments.length?(i=Array.from(n),l()):i.slice()},s.rangeRound=function(n){return i=Array.from(n),f=O,l()},s.clamp=function(n){return arguments.length?(c=!!n||m,l()):c!==m},s.interpolate=function(n){return arguments.length?(f=n,l()):f},s.unknown=function(n){return arguments.length?(r=n,s):r},function(r,e){return n=r,t=e,l()}}function rn(){return nn()(m,m)}function en(n){return Math.max(0,-g(Math.abs(n)))}function tn(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(g(t)/3)))-g(Math.abs(n)))}function un(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,g(t)-g(n))+1}function an(n,t,r,e){var a,u=U(n,t,r);switch((e=F(e??",f")).type){case"s":var o=Math.max(Math.abs(n),Math.abs(t));return null==e.precision&&!isNaN(a=tn(u,o))&&(e.precision=a),z(e,o);case"":case"e":case"g":case"p":case"r":null==e.precision&&!isNaN(a=un(u,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=a-("e"===e.type));break;case"f":case"%":null==e.precision&&!isNaN(a=en(u))&&(e.precision=a-2*("%"===e.type))}return B(e)}function on(n){var t=n.domain;return n.ticks=function(n){var r=t();return Q(r[0],r[r.length-1],n??10)},n.tickFormat=function(n,r){var e=t();return an(e[0],e[e.length-1],n??10,r)},n.nice=function(r){null==r&&(r=10);var e,a,u=t(),o=0,i=u.length-1,f=u[o],c=u[i],l=10;for(c<f&&(a=f,f=c,c=a,a=o,o=i,i=a);l-- >0;){if((a=y(f,c,r))===e)return u[o]=f,u[i]=c,t(u);if(a>0)f=Math.floor(f/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;f=Math.ceil(f*a)/a,c=Math.floor(c*a)/a}e=a}return n},n}function fn(){var n=rn();return n.copy=function(){return b(n,fn())},D.apply(n,arguments),on(n)}export{b as a,R as b,rn as c,fn as l,U as t};